extends: [cmake_package]

dependencies:
  build: [llvm]

sources:
- key: tar.xz:m5z7h6opqflddtd6o6pmcng52iunzdu2
  url: http://llvm.org/releases/3.5.1/cfe-3.5.1.src.tar.xz

defaults:
  # lib/libclang.so.3.4 contains hard-coded path
  relocatable: false

build_stages:
- name: configure
  extra: ['-D CLANG_PATH_TO_LLVM_BUILD:PATH=$LLVM_DIR',
          '-D LLVM_MAIN_SRC_DIR:PATH=$LLVM_DIR']
