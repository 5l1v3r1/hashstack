extends: [autotools_package]

# optionally build with ca-bundle package as a parameter if you want to
# trust hashstack's ca-bundle and want to squash the errors/warnings able
# not being able to verify ssl connections
dependencies:
    build: [openssl, libidn, zlib, {{build_with}}]

sources:
  - url: http://curl.haxx.se/download/curl-7.37.0.tar.gz
    key: tar.gz:dl6tespqw6zufuqodtfmxpasggdziyrs

build_stages:
- name: configure
  mode: override
  extra: ['--with-ca-bundle=${CA_BUNDLE_DIR}/etc/ca-bundle/ca-bundle.crt']

- name: install_mk-ca-bundle.pl
  after: install
  handler: bash
  bash:
    cp lib/mk-ca-bundle.pl ${ARTIFACT}/lib/
