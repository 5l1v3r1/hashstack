parameters:
- name: version
  type: version
  default: 2.3.1

extends: [distutils_package]

dependencies:
  build: [hdf5, mpi4py, mpi, numpy, cython]
  run: [numpy]

sources:
- url: https://pypi.python.org/packages/source/h/h5py/h5py-{{version}}.tar.gz
  key:
    when version 2.3.1: tar.gz:ir7flvmjhsriluiylkjyksfbf47x2sxu

build_stages:
- name: install
  after: setup_dirs
  handler: bash
  bash: |
    CC=${MPICC} ${PYTHON} setup.py install --mpi --prefix=${ARTIFACT} 
