parameters:
- name: version
  type: version
  default: 1.900.1

- name: relocatable
  type: bool
  default: false

extends: [autotools_package]

sources:
- url: http://www.ece.uvic.ca/~frodo/jasper/software/jasper-{{version}}.zip
  key:
    when version == 1.900.1: zip:noifvhbkzixcovkeeetgn3x4j22e3foq

build_stages:
- name: configure
  handler: bash
  mode: replace
  bash: |
    bash configure --prefix=${ARTIFACT} --enable-shared

- when: platform == 'Cygwin'
  name: configure
  handler: bash
  mode: replace
  bash: |
    cp /usr/share/automake-1.9/config.guess acaux
    bash configure --prefix=${ARTIFACT} --enable-shared
