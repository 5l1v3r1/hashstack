parameters:
- name: version
  type: version
  default: 2.1.0

- name: relocatable
  type: bool
  default: false

extends: [cmake_package]

# version 1.5 of openjpeg
# later versions should go in openjpeg2

sources:
- key:
    when version == 2.1.0: tar.gz:cizlxakp3cgy5uyuzfhqx7v3appikwky
  url: http://sourceforge.net/projects/openjpeg.mirror/files/{{version}}/openjpeg-{{version}}.tar.gz

build_stages:

# grib_api, at least, expects not to find this namespaced
- name: fix_include
  after: install
  handler: bash
  # FIXME: this does not look correct:
  bash: |
    ln -s ${ARTIFACT}/include/openjpeg-1.5/openjpeg.h ${ARTIFACT}/include/openjpeg.h

