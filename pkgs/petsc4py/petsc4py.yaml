extends: [distutils_package]
dependencies:
  build: [mpi, petsc, numpy, cython]
  run: [mpi, petsc, numpy]

build_stages:
  - when: with_conf
    handler: bash
    files: [petsc4py_install_conf.patch]
    before: install
    bash: |
      patch -up1 < _hashdist/petsc4py_install_conf.patch

sources:
  - url: https://bitbucket.org/petsc/petsc4py.git
    key: git:f4c5dc2139024e671b3f09c2565e00320e8d51cc
