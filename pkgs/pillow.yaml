paramters:
- name: version
  type: version
  default: 2.8.1

extends: [setuptools_package]

dependencies:
  build: [zlib, png, freetype, openjpeg]

sources:
- url: https://pypi.python.org/packages/source/P/Pillow/Pillow-{{version}}.tar.gz
  key:
    when version == 2.8.1: tar.gz:q5qmcgfaefplufr7o6bbcdt67tn3cx4k

build_stages:
- name: build_ext_options
  mode: replace
  before: install
  handler: bash
  bash: |
       export SETUPTOOLS_PACKAGE_EXTRA_OPTIONS="build_ext --enable-zlib --enable-freetype --enable-jpeg2000 --include-dirs=${ZLIB_DIR}/include:${PNG_DIR}/include:${FREETYPE_DIR}/include:${OPENJPEG_DIR}/include --library-dirs=${ZLIB_DIR}/lib:${PNG_DIR}/lib:${FREETYPE_DIR}/lib:${OPENJPEG_DIR}/lib"
