parameters:
- name: version
  type: version
  default: 0.9.6

# has a compiled-in default search path
- name: relocatable
  type: bool
  default: false

extends: [autotools_package]

dependencies:
  # for the pkg-config wrapper
  run: [python]

sources:
- url: http://rabbit.dereferenced.org/~nenolod/distfiles/pkgconf-{{version}}.tar.bz2
  key:
    when version == 0.9.6: tar.bz2:yqfhovb74xdslg4bh5yn3lzctqtwbisq

build_stages:
 - name: install_wrapper
   after: install
   files: [pkg-config-wrapper]
   handler: bash
   bash: |
     install -c -m 755 _hashdist/pkg-config-wrapper "${ARTIFACT}"/bin/pkg-config

when_build_dependency:
- prepend_path: PATH
  value: '${ARTIFACT}/bin'
- set: PKG_CONFIG_EXECUTABLE
  value: '${ARTIFACT}/bin/pkg-config'
