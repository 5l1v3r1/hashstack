extends: [distutils_package]

dependencies:
  build: [mpi, numpy]
  run: [mpi, numpy]

build_stages:
- name: build_pyboxlib
  after: prologue
  before: install
  handler: bash
  bash: |
    cd Src/Python/F90
    make OUT=build/lib CC=mpicc FC=mpif90 MPIHOME=$(dirname $(dirname $(which mpicc)))

sources:
- url: https://github.com/memmett/BoxLib.git
  key: git:6bccf4f5f6987584fa7227057cc8f396520aa989
