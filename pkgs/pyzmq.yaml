parameters:
- name: version
  type: version
  default: 14.3.1

extends: [distutils_package]

dependencies:
  build: 
    - numpy
    - cython
    - zmq

sources:
- url: https://pypi.python.org/packages/source/p/pyzmq/pyzmq-{{version}}.tar.gz
  key:
    when version == 14.3.1: tar.gz:adrghqtkkjhycetsi7tpg7f7ij7n345d

build_stages:

- name: install
  after: setup_dirs
  handler: bash
  bash: |
    # build
    PATH=$PATH:$ZMQ_DIR/bin $PYTHON setup.py build_ext --zmq=$ZMQ_DIR
    # install
    PATH=$PATH:$ZMQ_DIR/bin $PYTHON setup.py install --zmq=$ZMQ_DIR --prefix=$ARTIFACT
