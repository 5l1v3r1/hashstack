parameters:
- name: version
  type: version
  default: 3.0.5

- name: relocatable
  type: bool
  default: false

extends: [autotools_package]

dependencies:
  build: [pcre, python, +perl]

sources:
- url: http://downloads.sourceforge.net/swig/swig-{{version}}.tar.gz
  key:
    when version == 3.0.5: tar.gz:t5glt2hscpyedbjwi32y7zpiikgwgjin

build_stages:
- name: configure
  extra: ['--with-pcre-prefix=${PCRE_DIR}',
          '--without-octave',
          '--with-swiglibdir=${ARTIFACT}/share/swig{{version}}']

when_build_dependency:
- set: SWIG_EXECUTABLE
  value: ${ARTIFACT}/bin/swig
- prepend_path: PATH
  value: '${ARTIFACT}/bin'
